{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Canvas.vue?f663","webpack:///./src/models/tool.ts","webpack:///./src/App.vue?54d3","webpack:///./src/components/Canvas.vue?e883","webpack:///./src/models/shape.ts","webpack:///./src/constants.ts","webpack:///./src/models/layer.ts","webpack:///./src/models/events.ts","webpack:///./src/helpers/hasOwnProperty.ts","webpack:///./src/components/Canvas.vue","webpack:///./src/components/Canvas.vue?a1fb","webpack:///./src/components/Canvas.vue?c3a6","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/globalState.ts","webpack:///./src/config.ts","webpack:///./src/main.ts","webpack:///./src/App.vue?a2e3"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","ToolType","_vm","this","_h","$createElement","_c","_self","attrs","on","updateMousePos","style","_e","staticClass","_v","_l","$store","tool","index","class","selectedTool","currentToolIdx","$event","changeTool","_s","currentTool","option","optionName","staticStyle","startCase","type","directives","rawName","expression","modifiers","domProps","target","composing","$set","_n","$forceUpdate","hex8","Array","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","hoveringCanvas","model","callback","layer","id","selectedLayer","currentLayerId","clickedLayer","addLayer","currentPrefixedShortcutKey","clearLayer","saveCanvas","undo","redo","staticRenderFns","$emit","size","color","Pen","options","Eraser","stroke","strokeWeight","strokeColor","fill","fillColor","cornerRadius","Rect","points","topLeft","bottomRight","DEFAULT_BACKGROUND_COLOR","graphics","createGraphics","width","height","uuid","shapes","currentShapeIdx","state","clear","shape","noFill","backgroundColor","beginShape","pt","vertex","x","y","endShape","noStroke","rectMode","CORNERS","rect","pop","mousePos","createVector","mouseX","mouseY","currentShape","EVENTS","createLayer","obj","prop","sketch","canvas","$root","$on","layers","alert","format","prompt","toLowerCase","save","console","log","setup","createCanvas","innerWidth","innerHeight","pushUndoState","draw","background","update","image","mouseDragged","currentLayer","mouseReleased","keyPressed","dealWithDoubleShortcut","$config","changeColorShortcutPrefix","col","changeColorShortcutMap","setTimeout","setCurrentTool","document","getElementById","component","event","pageX","pageY","idx","top","left","components","Canvas","draggable","undoStack","undoStackIdx","tools","toolType","findIndex","e","filter","v","layerId","updateStateBasedOnUndoStack","prefixShortcutDuration","config","productionTip","observable","mixin","methods","vm","render","h","$mount","onkeydown","modifier","os","family","metaKey","ctrlKey","shiftKey"],"mappings":"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","file":"js/app.2bee103c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Canvas.vue?vue&type=style&index=0&id=4c604da2&scoped=true&lang=css&\"","import { Color } from \"@/models/types\";\n\n/// Kind of a hack so we can easily get the type of the tool class\n/// Why do i feel like everything i do is a hack\nexport enum ToolType { Pen, Eraser, Rect }\nexport type OptionType = \"number\" | \"color\" | \"boolean\";\n\nexport abstract class Tool {\n  abstract readonly type: ToolType;\n  abstract name: string;\n  abstract options: {};\n}\n\nexport interface ToolOption<T> {\n  value: T;\n  type: OptionType;\n}\n\nexport interface PenOptions {\n  size: ToolOption<number>;\n  color: ToolOption<Color>;\n}\nexport class Pen extends Tool {\n  readonly type = ToolType.Pen;\n  readonly name = \"Pen\";\n  options: PenOptions;\n\n  constructor(size?: number, color?: Color) {\n    super();\n    this.options = {\n      size: { type: \"number\", value: size ?? 3 },\n      color: { type: \"color\", value: color ?? \"white\" },\n    };\n  }\n}\n\nexport interface EraserOptions {\n  size: ToolOption<number>;\n}\nexport class Eraser extends Tool {\n  readonly type = ToolType.Eraser;\n  readonly name = \"Eraser\";\n  options: EraserOptions;\n\n  constructor(size?: number) {\n    super();\n    this.options = { size: { type: \"number\", value: size ?? 10 } };\n  }\n}\n\nexport interface RectOptions {\n  stroke: ToolOption<boolean>; // controls whether to draw stroke\n  strokeWeight: ToolOption<number>;\n  strokeColor: ToolOption<Color>;\n  fill: ToolOption<boolean>; // controls whether to draw fill\n  fillColor: ToolOption<Color>;\n  cornerRadius: ToolOption<number>;\n}\nexport class Rect extends Tool {\n  readonly type = ToolType.Rect;\n  readonly name = \"Rect\";\n  options: RectOptions;\n\n  constructor(stroke?: boolean, strokeWeight?: number, strokeColor?: Color, fill?: boolean, fillColor?: Color, cornerRadius?: number) {\n    super();\n    this.options = {\n      stroke: { type: \"boolean\", value: stroke ?? true },\n      strokeWeight: { type: \"number\", value: strokeWeight ?? 3 },\n      strokeColor: { type: \"color\", value: strokeColor ?? \"white\" },\n      fill: { type: \"boolean\", value: fill ?? false },\n      fillColor: { type: \"color\", value: fillColor ?? \"white\" },\n      cornerRadius: { type: \"number\", value: cornerRadius ?? 0 },\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"},on:{\"mousemove\":_vm.updateMousePos}},[(_vm.showingSizeIndicator)?_c('div',{style:(_vm.sizeIndicatorStyles),attrs:{\"id\":\"tool-size-indicator\"}}):_vm._e(),_c('main',[_c('div',{staticClass:\"sidebar left\"},[_c('h2',[_vm._v(\"Tools\")]),_c('div',{attrs:{\"id\":\"tools\"}},_vm._l((_vm.$store.tools),function(tool,index){return _c('button',{key:index,class:{ selectedTool: index == _vm.$store.currentToolIdx },on:{\"click\":function($event){return _vm.changeTool(index)}}},[_vm._v(\" \"+_vm._s(tool.name)+\" \")])}),0),_c('h2',[_vm._v(\"Options\")]),_c('div',{attrs:{\"id\":\"tool-options\"}},_vm._l((_vm.$store.currentTool.options),function(option,optionName){return _c('div',{key:optionName,staticStyle:{\"text-align\":\"left\"}},[_c('label',[_vm._v(_vm._s(_vm.startCase(optionName)))]),(option.type != 'boolean')?_c('br'):_vm._e(),(option.type == 'number')?_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(option.value),expression:\"option.value\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\"},domProps:{\"value\":(option.value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(option, \"value\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}):(option.type == 'color')?_c('chrome-picker',{staticClass:\"color-picker\",attrs:{\"value\":option.value},on:{\"input\":function (c) { return (option.value = c.hex8); }}}):(option.type == 'boolean')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(option.value),expression:\"option.value\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(option.value)?_vm._i(option.value,null)>-1:(option.value)},on:{\"change\":function($event){var $$a=option.value,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(option, \"value\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(option, \"value\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(option, \"value\", $$c)}}}}):_vm._e()],1)}),0)]),_c('div',[_c('Canvas',{on:{\"mouseover\":function($event){_vm.$store.hoveringCanvas = true},\"mouseleave\":function($event){_vm.$store.hoveringCanvas = false}}})],1),_c('div',{staticClass:\"sidebar right\"},[_c('h2',[_vm._v(\"Layers\")]),_c('draggable',{attrs:{\"animation\":200},model:{value:(_vm.$store.layers),callback:function ($$v) {_vm.$set(_vm.$store, \"layers\", $$v)},expression:\"$store.layers\"}},[_c('transition-group',{attrs:{\"type\":\"transition\"}},_vm._l((_vm.$store.layers),function(layer){return _c('div',{key:layer.id,staticClass:\"layer\",class:{ selectedLayer: layer.id == _vm.$store.currentLayerId },on:{\"click\":function($event){return _vm.clickedLayer(layer.id)}}},[_vm._v(\" \"+_vm._s(layer.name)+\" \")])}),0)],1),_c('div',{staticClass:\"center-child\"},[_c('button',{on:{\"click\":_vm.addLayer}},[_vm._v(\"Add Layer\")])]),_c('p',[_vm._v(_vm._s(_vm.$store.currentPrefixedShortcutKey))]),_c('h2',[_vm._v(\"Actions\")]),_c('button',{on:{\"click\":_vm.clearLayer}},[_vm._v(\"Clear Layer\")]),_c('button',{on:{\"click\":_vm.saveCanvas}},[_vm._v(\"Save as Image\")]),_c('button',{on:{\"click\":_vm.undo}},[_vm._v(\"Undo\")]),_c('button',{on:{\"click\":_vm.redo}},[_vm._v(\"Redo\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"canvas\"},on:{\"mouseover\":function($event){return _vm.$emit('mouseover')},\"mouseleave\":function($event){return _vm.$emit('mouseleave')}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import p5 from \"p5\";\nimport { EraserOptions, PenOptions, RectOptions, ToolType } from \"./tool\";\n\nexport abstract class Shape {\n  /// This is the tool the shape was made with\n  abstract tool: ToolType;\n  /// This is the options that the tool had at that time\n  abstract options: {};\n}\n\nexport class PointsShape extends Shape {\n  points: p5.Vector[];\n\n  readonly tool: ToolType;\n  readonly options: PenOptions | EraserOptions;\n\n  constructor(points: p5.Vector[], tool: ToolType, options: PenOptions | EraserOptions) {\n    super();\n    this.points = points;\n\n    this.tool = tool;\n    this.options = options;\n  }\n}\n\nexport class RectShape extends Shape {\n  topLeft: p5.Vector;\n  bottomRight: p5.Vector;\n\n  tool: ToolType;\n  options: RectOptions;\n\n\n  constructor(topLeft: p5.Vector, bottomRight: p5.Vector, tool: ToolType, options: RectOptions) {\n    super();\n\n    this.topLeft = topLeft;\n    this.bottomRight = bottomRight;\n\n    this.tool = tool;\n    this.options = options;\n  }\n}","import { Color } from \"./models/types\";\n\nexport const DEFAULT_BACKGROUND_COLOR: Color = \"black\";","import p5 from \"p5\";\nimport { Eraser, Pen, Rect, Tool, ToolType } from \"@/models/tool\";\nimport { PointsShape, RectShape, Shape } from \"./shape\";\nimport { DEFAULT_BACKGROUND_COLOR } from \"@/constants\";\nimport GlobalState from \"@/globalState\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default class Layer {\n  graphics: p5.Graphics;\n\n  name: string;\n  id: string;\n\n  width: number;\n  height: number;\n\n  shapes: Shape[]; // made public for debugging only\n  private currentShapeIdx: number | null;\n\n  constructor(p: p5, name: string) {\n    this.graphics = p.createGraphics(p.width, p.height);\n    this.width = p.width;\n    this.height = p.height;\n\n    this.name = name;\n    this.id = uuidv4();\n\n    this.shapes = [];\n    this.currentShapeIdx = null;\n  }\n\n  update(state: GlobalState) {\n    this.graphics.clear();\n    for (const shape of this.shapes) {\n      this.graphics.push();\n      if (shape instanceof PointsShape) {\n        this.graphics.noFill();\n        // The `\"color\" in shape.options` is just to satisfy typescript\n        this.graphics.stroke(shape.tool == ToolType.Pen && \"color\" in shape.options\n          ? shape.options.color.value\n          : state.backgroundColor ?? DEFAULT_BACKGROUND_COLOR);\n        this.graphics.beginShape();\n        this.graphics.strokeWeight(shape.options.size.value);\n        for (const pt of shape.points) {\n          this.graphics.vertex(pt.x, pt.y);\n        }\n        this.graphics.endShape();\n      } else if (shape instanceof RectShape) {\n        if (shape.options.fill.value) this.graphics.fill(shape.options.fillColor.value);\n        else this.graphics.noFill();\n\n        if (shape.options.stroke.value) this.graphics.stroke(shape.options.strokeColor.value);\n        else this.graphics.noStroke();\n\n        this.graphics.strokeWeight(shape.options.strokeWeight.value);\n\n        this.graphics.rectMode(this.graphics.CORNERS);\n        this.graphics.rect(shape.topLeft.x, shape.topLeft.y, shape.bottomRight.x, shape.bottomRight.y, shape.options.cornerRadius.value);\n      }\n      this.graphics.pop();\n    }\n  }\n\n  mouseDragged(p: p5, tool: Tool) {\n    const mousePos = p.createVector(p.mouseX, p.mouseY);\n    if (tool instanceof Pen || tool instanceof Eraser) {\n      if (this.currentShapeIdx == null) {\n        this.currentShapeIdx = this.shapes.length;\n        this.shapes.push(new PointsShape([mousePos], tool.type, cloneDeep(tool.options)));\n      } else {\n        if (this.currentShape instanceof PointsShape) {\n          this.currentShape.points.push(mousePos);\n        }\n      }\n    } else if (tool instanceof Rect) {\n      if (this.currentShapeIdx == null) {\n        this.currentShapeIdx = this.shapes.length;\n        // set the bottom right as the same as top left for now\n        this.shapes.push(new RectShape(mousePos, mousePos, tool.type, cloneDeep(tool.options)));\n      } else {\n        if (this.currentShape instanceof RectShape) {\n          // update the shape as person is dragging\n          this.currentShape.bottomRight = mousePos;\n        }\n      }\n    }\n  }\n\n  mouseReleased() {\n    this.currentShapeIdx = null;\n  }\n\n  clear() {\n    this.shapes = [];\n    this.currentShapeIdx = null;\n  }\n\n  private get currentShape(): Shape | null {\n    return this.currentShapeIdx == null ? null : this.shapes[this.currentShapeIdx];\n  }\n}","const EVENTS = {\n  createLayer: \"createLayer\",\n  saveCanvas: \"saveCanvas\",\n  undo: \"undo\",\n  redo: \"redo\",\n};\n\nexport default EVENTS;","export default function hasOwnProperty<X extends {}, Y extends PropertyKey>(obj: X, prop: Y): obj is X & Record<Y, unknown> {\n  return Object.hasOwnProperty.call(obj, prop)\n}","\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport p5 from \"p5\";\nimport Layer from \"@/models/layer\";\nimport { ToolOption, ToolType } from \"@/models/tool\";\nimport EVENTS from \"@/models/events\";\nimport hasOwnProperty from \"@/helpers/hasOwnProperty\";\nimport { Color } from \"@/models/types\";\n\n@Component\nexport default class Canvas extends Vue {\n  mounted() {\n    const sketch = (p: p5) => {\n      let canvas: p5.Renderer | null;\n\n      this.$root.$on(EVENTS.createLayer, () => {\n        this.$store.layers.push(\n          new Layer(p, `Layer ${this.$store.layers.length + 1}`)\n        );\n        this.$store.currentLayerId = this.$store.layers[\n          this.$store.layers.length - 1\n        ].id;\n      });\n\n      this.$root.$on(EVENTS.saveCanvas, () => {\n        if (canvas == null) {\n          alert(\"Sorry, the canvas hasn't loaded yet\");\n        } else {\n          const format = prompt(\"File format (png|jpg)\", \"png\")?.toLowerCase();\n          if (!format) return;\n          if (format != \"png\" && format != \"jpg\") {\n            alert(\"Invalid format, can only be 'png' or 'jpg'\");\n          } else {\n            p.save(canvas, `sketch.${format}`);\n          }\n        }\n      });\n\n      this.$root.$on(EVENTS.undo, () => {\n        console.log(\"undo event received\");\n        this.$store.undo();\n      });\n\n      this.$root.$on(EVENTS.redo, () => {\n        console.log(\"redo event received\");\n        this.$store.redo();\n      });\n\n      p.setup = () => {\n        canvas = p.createCanvas(window.innerWidth * 0.5, window.innerHeight);\n        this.$store.layers = [new Layer(p, \"Layer 1\")];\n        this.$store.currentLayerId = this.$store.layers[0].id;\n        this.$store.pushUndoState();\n\n        console.log(this.$store);\n      };\n\n      p.draw = () => {\n        p.background(this.$store.backgroundColor ?? p.color(0));\n        for (const layer of this.$store.layers) layer.update(this.$store);\n        for (const layer of this.$store.layers) p.image(layer.graphics, 0, 0);\n      };\n\n      p.mouseDragged = () => {\n        if (!this.$store.hoveringCanvas) return;\n        console.log(\"mouse dragged\");\n        this.$store.currentLayer?.mouseDragged(p, this.$store.currentTool);\n      };\n\n      p.mouseReleased = () => {\n        if (!this.$store.hoveringCanvas) return;\n        this.$store.currentLayer?.mouseReleased();\n        this.$store.pushUndoState();\n      };\n\n      p.keyPressed = () => {\n        const dealWithDoubleShortcut = (key: string) => {\n          if (\n            this.$store.currentPrefixedShortcutKey ==\n            this.$config.changeColorShortcutPrefix\n          ) {\n            if (hasOwnProperty(this.$store.currentTool.options, \"color\")) {\n              const col = this.$config.changeColorShortcutMap[key];\n              if (col) {\n                console.log(`Changing color to ${col}...`);\n                (this.$store.currentTool.options\n                  .color as ToolOption<Color>).value = col;\n              } else {\n                console.log(`Invalid color: ${key}`);\n              }\n            }\n            this.$store.currentPrefixedShortcutKey = null;\n          }\n        };\n\n        switch (p.key) {\n          case \"b\":\n            dealWithDoubleShortcut(\"b\");\n            break;\n          case \"c\":\n            // Color change shortcut\n            this.$store.currentPrefixedShortcutKey = \"c\";\n            setTimeout(() => {\n              this.$store.currentPrefixedShortcutKey = null;\n            }, 1000);\n            break;\n          case \"e\":\n            console.log(\"E key pressed\");\n            this.$store.setCurrentTool(ToolType.Eraser);\n            break;\n          case \"p\":\n            this.$store.setCurrentTool(ToolType.Pen);\n            break;\n          case \"w\":\n            dealWithDoubleShortcut(\"w\");\n            break;\n          default:\n            dealWithDoubleShortcut(p.key);\n            break;\n        }\n      };\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    new p5(sketch, document.getElementById(\"canvas\")!);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Canvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Canvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Canvas.vue?vue&type=template&id=4c604da2&scoped=true&\"\nimport script from \"./Canvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./Canvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Canvas.vue?vue&type=style&index=0&id=4c604da2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c604da2\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport Canvas from \"@/components/Canvas.vue\";\nimport EVENTS from \"@/models/events\";\nimport draggable from \"vuedraggable\";\nimport { Chrome } from \"vue-color\";\nimport { Eraser, Pen, Rect } from \"./models/tool\";\n\n@Component({\n  components: {\n    Canvas,\n    draggable,\n    \"chrome-picker\": Chrome,\n  },\n})\nexport default class App extends Vue {\n  // METHODS\n  updateMousePos(event: MouseEvent) {\n    this.$store.mousePos.x = event.pageX;\n    this.$store.mousePos.y = event.pageY;\n  }\n\n  addLayer() {\n    this.$root.$emit(EVENTS.createLayer);\n  }\n\n  changeTool(idx: number) {\n    this.$store.currentToolIdx = idx;\n  }\n\n  clearLayer() {\n    this.$store.currentLayer.clear();\n  }\n\n  updateOption(option: string) {\n    // TODO: Validate input\n    console.log(option);\n  }\n\n  clickedLayer(id: string) {\n    this.$store.currentLayerId = id;\n  }\n\n  saveCanvas() {\n    this.$root.$emit(EVENTS.saveCanvas);\n  }\n\n  undo() {\n    console.log(\"undo button pressed\");\n    this.$root.$emit(EVENTS.undo);\n  }\n\n  redo() {\n    console.log(\"redo button pressed\");\n    this.$root.$emit(EVENTS.redo);\n  }\n\n  // GETTERS\n  get sizeIndicatorStyles() {\n    let size = 3;\n    if (\n      this.$store.currentTool instanceof Pen ||\n      this.$store.currentTool instanceof Eraser\n    ) {\n      size = this.$store.currentTool.options.size.value;\n    } else if (this.$store.currentTool instanceof Rect) {\n      size = this.$store.currentTool.options.stroke\n        ? this.$store.currentTool.options.strokeWeight.value\n        : size;\n    }\n\n    // Prevente user confusion on why cursor disappeared\n    if (size < 1) size = 1;\n\n    return {\n      width: size + \"px\",\n      height: size + \"px\",\n      top: this.$store.mousePos.y - size / 2 + \"px\",\n      left: this.$store.mousePos.x - size / 2 + \"px\",\n    };\n  }\n\n  get showingSizeIndicator() {\n    return this.$store.hoveringCanvas; // && \"size\" in this.$store.currentTool.options;\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=a8ab6c54&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=a8ab6c54&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a8ab6c54\",\n  null\n  \n)\n\nexport default component.exports","import Layer from \"@/models/layer\";\nimport { Eraser, Pen, Rect, Tool, ToolType } from \"@/models/tool\";\nimport { Color } from \"@/models/types\";\nimport cloneDeep from \"lodash/cloneDeep\";\n\nexport type UndoItem = { layers: Layer[]; layerId: string };\n\ninterface Pos {\n  x: number;\n  y: number;\n}\n\nexport default class GlobalState {\n  /// Because making a layer needs a p5 instance, it will only be set\n  /// in the setup method of the sketch\n  layers: Layer[] = [];\n  currentLayerId: string | null = null; // this needs to be null because we don't know the layer id until we create it, and creating it needs a p5 instance\n\n  tools: Tool[];\n  currentToolIdx = 0;\n\n  backgroundColor: Color = \"black\";\n\n  currentPrefixedShortcutKey: string | null = null;\n\n  hoveringCanvas = false;\n  mousePos: Pos = { x: 0, y: 0 };\n\n\n  private undoStack: UndoItem[] = [];\n  private undoStackIdx = 0;\n\n  constructor() {\n    this.tools = [\n      new Pen(),\n      new Eraser(),\n      new Rect(),\n    ];\n  }\n\n  get currentTool(): Tool {\n    return this.tools[this.currentToolIdx];\n  }\n\n  setCurrentTool(toolType: ToolType) {\n    this.currentToolIdx = this.tools.findIndex(e => e.type == toolType);\n  }\n\n  get currentLayer(): Layer {\n    return this.layers.filter(v => v.id == this.currentLayerId)[0];\n  }\n\n  /// Should be called _after_ the actual state change has been made\n  pushUndoState(): void {\n    console.log(\"pushing new undo state...\");\n    console.log(`Undo stack length: ${this.undoStack.length}, Undo index: ${this.undoStackIdx}`);\n\n    // If current undo idx is not at the top of the stack\n    // delete everything above the pointer\n    // because user is changing history and branching onto a new timeline\n\n    if (this.undoStackIdx < this.undoStack.length - 1) {\n      console.log(\"rewriting history...\");\n      this.undoStack = cloneDeep(this.undoStack).slice(0, this.undoStackIdx + 1);\n      this.undoStackIdx = this.undoStack.length - 1;\n    }\n\n    console.log(`Undo stack length: ${this.undoStack.length}, Undo index: ${this.undoStackIdx}`);\n\n    // Now the undo index should be at the top of the undo stack\n    // We update the index and push the new state into the stack\n    this.undoStackIdx = this.undoStack.length;\n    this.undoStack.push(cloneDeep({\n      layerId: this.currentLayerId ?? \"\",\n      layers: this.layers,\n    }));\n\n    console.log(`Undo stack length: ${this.undoStack.length}, Undo index: ${this.undoStackIdx}`);\n  }\n\n  undo(): void {\n    console.log(`Undo stack length: ${this.undoStack.length}, Undo index: ${this.undoStackIdx}`);\n\n    if (this.undoStackIdx <= 0) return;\n    if (this.undoStack.length <= 1) return;\n\n    this.undoStackIdx--;\n    this.updateStateBasedOnUndoStack();\n\n    console.log(`Undo stack length: ${this.undoStack.length}, Undo index: ${this.undoStackIdx}`);\n  }\n\n  redo(): void {\n    console.log(\"Redoing...\");\n\n    if (this.undoStack.length <= 1) return;\n    if (this.undoStackIdx >= this.undoStack.length - 1) return;\n\n    this.undoStackIdx++;\n    this.updateStateBasedOnUndoStack();\n  }\n\n  private updateStateBasedOnUndoStack(): void {\n    this.layers = cloneDeep(this.undoStack[this.undoStackIdx].layers);\n    this.currentLayerId = cloneDeep(this.undoStack[this.undoStackIdx].layerId);\n  }\n}\n","import { Color } from \"@/models/types\";\n\n// TODO: Save and retrieve config from local storage\nexport default class Config {\n  changeColorShortcutPrefix = \"c\";\n  prefixShortcutDuration = 1000;\n\n  // The value of this map actually represents the color, but stupidly (again)\n  // you can't make a p5 color without a p5 instance\n  changeColorShortcutMap: { [k: string]: Color } = {\n    \"b\": \"blue\",\n    \"w\": \"white\",\n    \"g\": \"green\",\n    \"r\": \"red\",\n    \"y\": \"yellow\",\n    \"B\": \"black\",\n  };\n}","import Vue from \"vue\";\nimport App from \"@/App.vue\";\nimport GlobalState from \"@/globalState\";\nimport '@/assets/styles.css';\nimport Config from \"./config\";\nimport startCase from 'lodash/startCase';\nimport platform from \"platform\";\nimport EVENTS from \"./models/events\";\n\n// Vue config\nVue.config.productionTip = false;\n\n// Vue globals\nVue.prototype.$store = Vue.observable(new GlobalState());\nVue.prototype.$config = Vue.observable(new Config());\n\n// Vue stuff\nVue.mixin({\n  methods: {\n    startCase\n  }\n});\n\nconst vm = new Vue({\n  render: h => h(App)\n}).$mount(\"#app\");\n\n// Keyboard shortcuts\nwindow.onkeydown = (e: KeyboardEvent) => {\n  const modifier = platform.os?.family == \"OS X\" ? e.metaKey : e.ctrlKey;\n  if (modifier && e.shiftKey && e.key == \"z\") {\n    console.log(\"command/ctrl shift z pressed\");\n    vm.$emit(EVENTS.redo);\n  }\n  else if (modifier && e.key == \"z\") {\n    console.log(\"command/ctrl z pressed\");\n    vm.$emit(EVENTS.undo);\n  }\n};\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=a8ab6c54&scoped=true&lang=css&\""],"sourceRoot":""}